document.getElementById('editBtn').addEventListener('click', function (event) {
    event.preventDefault();
    const associateId = document.getElementById('associateId').value;

    if (!associateId) {
        alert('Please enter Associate ID');
        return;
    }

    // Fetch only Current status record
    fetch(`/fetch-data?associateId=${associateId}&status=Current`)
        .then(response => {
            if (!response.ok) throw new Error('Current record not found');
            return response.json();
        })
        .then(data => populateFormData(data))
        .catch(error => alert(error.message));
});


app.get('/fetch-data', (req, res) => {
    const { associateId, status } = req.query;
    // ... (file reading logic)
    
    const record = data.find(row =>
        row['Associate ID'] === associateId && 
        row['Status'] === status
    );

    if (!record) return res.status(404).json({ error: 'Record not found' });
    res.json(record);
});
